<!DOCTYPE html>
<html lang="en">
    <head>
        <title>NG-CHM Builder</title>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	 	<script src="javascript/NGCHM_GUI_Util.js"></script>
	 	<script src="javascript/Transform.js"></script>
	 	<script src="javascript/MatrixFile.js"></script>
	 	<script src="javascript/lib/handsontable.full.min.js"></script>
	 	<script src="javascript/lib/html5-canvas-bar-graph.js"></script>
		<link rel="stylesheet" href="css/handsontable.full.css">
		<link rel="stylesheet" href="css/NGCHM_GUI.css">
 		<script type="text/Javascript">
			NgChmGui.mapProperties = null;
			NgChmGui.UTIL.getHeatmapProperties(NgChmGui.UTIL.loadHeaderData);
	 	</script>
    </head>
    <body style="font-family: sans-serif; font-size: 100%;" onload="NgChmGui.TRANS.getWorkingMatrix();">
	   <div class="serviceHeader" id="serviceHeader">
	        <div id="mda_header" class="serviceHeaderLogo">
	        	<a href="https://www.mdanderson.org/education-and-research/departments-programs-and-labs/departments-and-divisions/bioinformatics-and-computational-biology/index.html"  target="_blank">
	           		<img id="mdaLogo" src="images/mdabcblogo262x108.png" alt=""/>
	           </a>
	       	</div>
	 		<div id='map_info'>
     			<div id="mapName"  class="inputText" style="font-size: 14px;color: rgb(51, 51, 51);"></div>
    			<div id="mapDesc" class="inputText"  style="font-size: 14px;color: rgb(51, 51, 51);"></div>
	  		</div>
	    </div>   
        <br>
	    <div id="trans_container" style="height: 100%">
	 		<div id="transforms" style="float: left; width: 400px;">
	    		<br>   
	 	        <form id="missing_frm" onsubmit="return false;">
	 	        	<div class="sec-header">Missing / Invalid Data:</div>
	 	        	<div class="pref-header">Select a correction:
			            <select name="Correction" id="Correction" onchange='NgChmGui.TRANS.selectCorrection()'>
			  				<option value=""></option>
			  				<option value="ReplaceNonNumeric">Replace Invalid</option>
			  				<option value="FillMissing">Fill Missing</option>
						</select> 
					</div>
					<div id='ReplaceNonNumeric' style="display: none;">
		 	        	<div class="pref-header2">Replace Invalid Values With:
		 	        		<br>
		 	        		<div class="pref-header3">
								<input type="radio" name="nreplace" value="N/A" onclick="NgChmGui.TRANS.enableButton('correct_btn')"> N/A<br>
		  						<input type="radio" name="nreplace" value="zero" onclick="NgChmGui.TRANS.enableButton('correct_btn')"> Zero<br>
		  						<input type="radio" name="nreplace" value="rowmean" onclick="NgChmGui.TRANS.enableButton('correct_btn')"> Row Mean<br>
		  						<input type="radio" name="nreplace" value="colmean" onclick="NgChmGui.TRANS.enableButton('correct_btn')"> Column Mean<br>
		  					</div>
	  					</div>
					</div>
					<div id='FillMissing' style="display: none;">
		 	        	<div class="pref-header2">Replace Missing Values With:
		 	        		<br>
		 	        		<div class="pref-header3">
		  						<input type="radio" name="mreplace" value="zero" onclick="NgChmGui.TRANS.enableButton('correct_btn')"> Zero<br>
		  						<input type="radio" name="mreplace" value="rowmean" onclick="NgChmGui.TRANS.enableButton('correct_btn')"> Row Mean<br>
		  						<input type="radio" name="mreplace" value="colmean" onclick="NgChmGui.TRANS.enableButton('correct_btn')"> Column Mean<br>
		  						<input type="radio" name="mreplace" value="rowmin" onclick="NgChmGui.TRANS.enableButton('correct_btn')"> Row Minimum Value<br>
		  						<input type="radio" name="mreplace" value="colmin" onclick="NgChmGui.TRANS.enableButton('correct_btn')"> Column Minimum Value<br>
		  					</div>
	  					</div>
					</div>
	 	        	<div class="pref-header">
						<input id='correct_btn' type="image" src='images/applyButton.png' alt='Correct Invalid / Missing' onclick="NgChmGui.TRANS.correctMatrixData()" style="opacity: 0.3; display: none" disabled/>
					</div>
		        </form>
		        <br>
	 	        <form id="filter_frm" onsubmit="return false;">
	 	        	<div class="sec-header">Filter Data:</div>
	 	        	<div class="pref-header">Select a filter:
			            <select name="Filter" id="Filter" onchange='NgChmGui.TRANS.selectFilter()'>
			  				<option value=""></option>
			  				<option value="Variation">Standard Deviation</option>
			  				<option value="Range">Range</option>
			  				<option value="MissingData">Missing Data</option>
						</select>
					</div>
					<div id='Variation' style="display: none;">
		 	        	<div class="pref-header2">Operate On:
		 	        		<br>
		 	        		<div class="pref-header3">
								<input type="radio" name="vrowcol" value="row" checked> Row<br>
		  						<input type="radio" name="vrowcol" value="col"> Column<br>
		  					</div>
	  					</div>
		 	        	<div class="pref-header2">Method:
		 	        		<br>
		 	        		<div class="pref-header3">
		  						<input type="radio" name="vfiltermethod" value="std_value" onclick="NgChmGui.TRANS.enableButton('filter_btn')"> Remove if Standard Deviation &lt;&nbsp; &nbsp;<input type="text" name="std_limit" size=3><br>
		  						<input type="radio" name="vfiltermethod" value="pct" onclick="NgChmGui.TRANS.enableButton('filter_btn')"> Keep <input type="number" name="std_pct" min="0" max="99" style="width: 35px;">% with highest Standard Deviation  <br>
		  						<input type="radio" name="vfiltermethod" value="fixednum" onclick="NgChmGui.TRANS.enableButton('filter_btn')"> Keep <input type="text" name="std_num_keep" size=3> rows/cols with highest Standard Deviation  <br>
		  					</div>
	  					</div>
					</div>
					<div id='Range' style="display: none;">
		 	        	<div class="pref-header2">Operate On:
		 	        		<br>
		 	        		<div class="pref-header3">
								<input type="radio" name="rrowcol" value="row" checked> Row<br>
 									<input type="radio" name="rrowcol" value="col"> Column<br>
		  					</div>
	  					</div>
		 	        	<div class="pref-header2">Method:
		 	        		<br>
		 	        		<div class="pref-header3">
		  						<input type="radio" name="rfiltermethod" value="allless" onclick="NgChmGui.TRANS.enableButton('filter_bt'n)"> Remove if All Values &lt;&nbsp;&nbsp;<input type="text" name="arange_min" size=3><br>
		  						<input type="radio" name="rfiltermethod" value="allgreater" onclick="NgChmGui.TRANS.enableButton('filter_btn')"> Remove if All Values &gt;&nbsp;&nbsp;<input type="text" name="arange_max" size=3><br>
		  						<input type="radio" name="rfiltermethod" value="oneless" onclick="NgChmGui.TRANS.enableButton('filter_bt'n)"> Remove if One Value &lt;&nbsp;&nbsp;<input type="text" name="1range_min" size=3><br>
		  						<input type="radio" name="rfiltermethod" value="onegreater" onclick="NgChmGui.TRANS.enableButton('filter_btn')"> Remove if One Value &gt;&nbsp;&nbsp;<input type="text" name="1range_max" size=3><br>
		  						<input type="radio" name="rfiltermethod" value="oneval" onclick="NgChmGui.TRANS.enableButton('filter_btn')">   Keep if 1+ Values &gt;&nbsp;&nbsp;<input type="text" name="range_max" size=3><br> 
		  					</div>
	  					</div>
					</div>
					<div id='MissingData' style="display: none;">
		 	        	<div class="pref-header2">Operate On:
		 	        		<br>
		 	        		<div class="pref-header3">
								<input type="radio" name="mrowcol" value="row" checked> Row<br>
		  						<input type="radio" name="mrowcol" value="col"> Column<br>
		  					</div>
	  					</div>
		 	        	<div class="pref-header2">Method:
		 	        		<br>
		 	        		<div class="pref-header3">
		  						<input type="radio" name="mfiltermethod" value="pctgreater" onclick="NgChmGui.TRANS.enableButton('filter_btn')"> Remove if &gt;&nbsp; <input type="number" name="std_pct_missing" min="0" max="99" style="width: 35px;">% Missing Values<br>
		  						<input type="radio" name="mfiltermethod" value="pctless" onclick="NgChmGui.TRANS.enableButton('filter_btn')"> Remove if &gt; <input type="text" name="std_num_missing" size=3> (number) Missing Values<br>  
		  					</div>
	  					</div>
					</div>
	 	        	<div class="pref-header">
						<input id='filter_btn' type="image" src='images/applyButton.png' alt='Filter Data' onclick="NgChmGui.TRANS.filterMatrixData()" style="opacity: 0.3; display: none" disabled/>
					</div>
		        </form>
		        <br>
	 	        <form id="trans_frm" onsubmit="return false;">
	 	        	<div class="sec-header">Transform Data:</div>
	 	        	<div class="pref-header">Select a transform:
			            <select name="Transform" id="Transform" onchange="NgChmGui.TRANS.selectTransform()">
			  				<option value=""></option>
			  				<option value="Log">Log</option>
			  				<option value="MeanCenter">Mean Center</option>
			  				<option value="Z-Norm">Z-Norm</option>
			  				<option value="Arithmetic">Arithmetic</option>
						</select> 
					</div>
					<div id='Log' style="display: none;">
		 	        	<div class="pref-header2">Method:
		 	        		<br>
		 	        		<div class="pref-header3">
		 						<input type="radio" name="tlfiltermethod" value="log10" onclick="NgChmGui.TRANS.enableButton('trans_btn')"> Log Base 10<br>
		  						<input type="radio" name="tlfiltermethod" value="naturalLog" onclick="NgChmGui.TRANS.enableButton('trans_btn')"> Natural Log <br>
		  						<input type="radio" name="tlfiltermethod" value="log2" onclick="NgChmGui.TRANS.enableButton('trans_btn')"> Log Base 2 <br>
		  					</div>
	  					</div>
					</div>
					<div id='MeanCenter' style="display: none;">
		 	        	<div class="pref-header2">Mean Center:
		 	        		<br>
		 	        		<div class="pref-header3">
								<input type="radio" name="tmrowcol" value="row" onclick="NgChmGui.TRANS.enableButton('trans_btn')"> Row<br>
		  						<input type="radio" name="tmrowcol" value="col" onclick="NgChmGui.TRANS.enableButton('trans_btn')"> Column<br>
		  					</div>
	  					</div>
					</div>
					<div id='Z-Norm' style="display: none;">
		 	        	<div class="pref-header2">Z-Normalize:
		 	        		<br>
		 	        		<div class="pref-header3">
								<input type="radio" name="tmrowcol" value="row" onclick="NgChmGui.TRANS.enableButton('trans_btn')"> Row<br>
		  						<input type="radio" name="tmrowcol" value="col" onclick="NgChmGui.TRANS.enableButton('trans_btn')"> Column<br>
		  					</div>
	  					</div>
					</div>
					<div id='Arithmetic' style="display: none;">
		 	        	<div class="pref-header2">Method:
		 	        		<br>
		 	        		<div class="pref-header3">
		 						<input type="radio" name="tatransformmethod" value="add" onclick="NgChmGui.TRANS.enableButton('trans_btn')"> Add &nbsp; <input type="number" name="add_value" style="width: 35px;">to All Values<br>
		  						<input type="radio" name="tatransformmethod" value="multiply" onclick="NgChmGui.TRANS.enableButton('trans_btn')"> Multiply &nbsp; <input type="number" name="multiply_value" style="width: 35px;">to All Values<br>
		  					</div>
	  					</div>
					</div>
	 	        	<div class="pref-header">
						<input id='trans_btn' type="image" src='images/applyButton.png' alt='Transform the Matrix' onclick="NgChmGui.TRANS.transformMatrixData()" style="opacity: 0.3; display: none" disabled/>
					</div>
		        </form>
		        <br>
 	        	<div class="sec-header">Restore Original Matrix:</div>
				<input id='restore_btn' type="image" src='images/resetButton.png' alt='Restore Matrix' onclick="NgChmGui.TRANS.resetMatrix()"/>
	            <br><br><br><br>
		    </div>
		    <div id="trans_data" style="float: right; width: calc(100% - 450px); padding-left:50px;">
		    	<br><br>
		     	<div id="matrix_stats" style="float: left;">
		        	<b>Number of Rows:</b>  <label id="numRows"></label><br> <br>
		        	<b>Number of Columns:</b> <label id="numCols"></label><br><br> 
		        	<b>Missing Values:</b> <label id="numMissing"></label><br><br>
		        	<b>Invalid Values:</b> <label id="numInvalid"></label><br><br>
		        	<b>Minimum Value:</b> <label id="minVal"></label><br><br>
		        	<b>Maximum Value:</b> <label id="maxVal"></label><br><br>
		        	&nbsp;<br>
		        	&nbsp;<br>
		        	&nbsp;<br>
		    	</div>
		    	<div style="float:right">
			    	<div class=""><b>Show Distribution:</b>
				            <select name="Histogram" id="Histogram" onchange="NgChmGui.TRANS.selectHistogram()">
				  				<option value="matrix_histo">Matrix Distribution</option>
				  				<option value="row_sd_matrix_histo">Row Standard Deviation</option>
				  				<option value="col_sd_matrix_histo">Column Standard Deviation</option>
							</select> 
						</div>
			    	<div id="matrix_histo" style="float: right;">
			    		<b>Data Distribution:</b><br>
			    		<canvas id="histo_canvas" style="width: 500px; height: 150px;"></canvas>
			    	</div>    
			    	<div id="row_sd_matrix_histo" style="float: right; display: none">
			    		<b>Row Standard Deviation Distribution:</b><br>
			    		<canvas id="row_sd_histo_canvas" style="width: 500px; height: 150px;"></canvas>
			    	</div>    
			    	<div id="col_sd_matrix_histo" style="float: right; display:none">
			    		<b>Column Standard Deviation Distribution:</b><br>
			    		<canvas id="col_sd_histo_canvas" style="width: 500px; height: 150px;"></canvas>
			    	</div>    
		    	</div>
		        <br>
		        <br>
		        <div id="matrixDisplay" style="display: none; "></div>
		    </div>
	        <div id="transPrevButton"  class="prev_btn">  
			    <img id='prev1_btn' src='images/prevButton.png' alt='Go to previous step' onclick='window.open("/NGCHM_GUI_Builder/NGCHMBuilder_Matrix.html","_self")' />
	        </div>   
	        <div id="transNextButton"  class="next_btn">  
			    <img id='next1_btn' src='images/nextButton.png' alt='Go to next step' onclick='window.open("/NGCHM_GUI_Builder/NGCHMBuilder_Covariates.html","_self")' />
	        </div>   
			<div id="message" style="display: none; position: absolute; background-color: rgb(230, 240, 255);"></div>
		</div>
	</body>
</html>