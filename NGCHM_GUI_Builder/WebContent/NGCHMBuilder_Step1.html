<!DOCTYPE html>
<html lang="en">
    <head>
        <title>File Upload</title>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    </head>
    <body>
		<script type="text/Javascript">
		topMatrixJson = null;
		function sendMatrix() {
			var req = new XMLHttpRequest();
			var formData = new FormData( document.getElementById("matrix_frm") );
			req.open("POST", "UploadMatrix", true);
			req.onreadystatechange = function () {
				console.log('state change');
				if (req.readyState == req.DONE) {
					console.log('done');
			        if (req.status != 200) {
			        	console.log('not 200');
			            console.log('Failed to upload matrix '  + req.status);
			        } else {
			        	//Got corner of matrix data.
			        	console.log('200');
			        	topMatrixJson = req.response;
			        	topMatrixString = JSON.parse(req.response);
			        	document.getElementById('display').value = topMatrixString;
				    }
				}
			};
			req.send(formData);
		}
 		</script>
    
    
        <form method="POST" enctype="multipart/form-data" id="matrix_frm" onsubmit="return false;">
            File:
            <input type="file" name="matrix" id="matrix" /> 
            <button onclick="sendMatrix()">Upload</button> 
        </form>
        
        <br>
        <textarea id="display" rows="6" cols="100"></textarea>
    </body>
</html>