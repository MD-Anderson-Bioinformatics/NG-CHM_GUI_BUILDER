
<html lang="en">
    <head>
        <title>NG-CHM Builder</title>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	 	<script src="javascript/NGCHM_GUI_Util.js"></script>
	 	<script src="javascript/MatrixFile.js"></script>
	 	<script src="javascript/lib/handsontable.full.min.js"></script>
		<link rel="stylesheet" href="css/handsontable.full.css">
		<link rel="stylesheet" href="css/NGCHM_GUI.css">
		<script type="text/Javascript">
			NgChmGui.mapProperties = null;
		 	window.onload = function() {
				NgChmGui.UTIL.getHeatmapProperties(NgChmGui.FILE.loadData); 
		 		NgChmGui.UTIL.messageBoxConfigure();
		 		var chmFileItem = document.getElementById('image-upload');
		 		if (!NgChmGui.UTIL.elemExist(NgChmGui.matrixFile)) {
		 			setTimeout(function(){ chmFileItem.addEventListener('change', NgChmGui.matrixFile.sendMatrix, false); }, 2000);
		 		} else {
					chmFileItem.addEventListener('change', NgChmGui.matrixFile.sendMatrix, false);
		 		}
		 	};	
	 	</script>
    </head>
    <body style="font-family: sans-serif; font-size: 100%;">
       <div id="screenNote" style="display: none">Define the incoming data matrix: Select from the following controls and click on the grid to edit the location of labels, covariate bars, and the location at which the matrix data begins in the imported file.</div>
	   <div class="serviceHeader" id="serviceHeader">
	        <div id="mda_header" class="serviceHeaderLogo">
	        	<a href="https://www.mdanderson.org/education-and-research/departments-programs-and-labs/departments-and-divisions/bioinformatics-and-computational-biology/index.html"  target="_blank">
	           		<img id="mdaLogo" src="images/mdabcblogo262x108.png" alt=""/>
	           </a>
	       	</div>
		    <div id="pageTitle">NG-CHM BUILDER: Select Matrix</div>
	    </div>   
      	<div id="container" class="display_container" style="position: relative;">
		    <div id="matrixSelection" class="data_entry_container" style="width: 25%">
		 		<div id="fileLookup">   
			        <form method="POST" enctype="multipart/form-data" id="matrix_frm" onsubmit="return false;">
				        	<div class="image-upload" id="image-upload">
							    <label for="file-input">
							        <img src="images/buttonMatrixOpen.png"/>
							    </label>
			    				<input id="file-input" type="file" name="matrix" id="matrix"/>
							</div>
				        	<table cellpadding="0">
				        		<tr class="chmTR">
				        			<td><b>&nbsp;&nbsp;Try Sample Matrix:&nbsp;&nbsp;</b></td>
									<td><img id='sampleMatrix_btn' align="bottom" src='images/buttonSampleOpen.png' alt='Download the heat map to PDF file' onclick='NgChmGui.matrixFile.sendMatrix(true);' /></td>
								</tr>
				        	</table>
			        </form>
			    </div>
		 		<div id='map_info' style="border-top: 4px double #0843c1;">
			 		<div id='map_name' class="inputText">
		     			<div id="mapName" style="font-size: 14px; color: #0843c1; width: 90%"><b>Heat Map Name:</b>&nbsp;&nbsp;<textarea name="mapNameValue" id="mapNameValue" rows="1" cols="40" style="resize: none" maxlength="40" onchange='NgChmGui.FILE.changeNameDesc()'></textarea></div><br>
		     			<div id="mapDesc" style="font-size: 14px; color: #0843c1;"><b>Heat Map Desc:</b>&nbsp;&nbsp;<textarea name="mapDescValue" id="mapDescValue" rows="4" cols="40" style="resize: none" onchange='NgChmGui.FILE.changeNameDesc()'></textarea></div>
				 		<div id='matrix_name' class="inputText" style="display: none;">
			     			<div id="matrixName"><b>Matrix Name:</b>&nbsp;&nbsp;<input name="matrixNameValue" id="matrixNameValue" size="40" value="Data Layer 1"></input></div>
			  		    </div>
		  		    </div>
		  		</div>
				<div id="matrixCovsPanel">
				</div>
		        <div id="matrixNextButton" class="next_btn" style="display: none;">
			    	<img id='matrixNext_btn' class="next_btn" src='images/nextButton.png' alt='Go to next step' onclick='NgChmGui.matrixFile.processMatrix();' />
			    </div>
			</div>
	        <div id="matrixView" class="layout_display_container" style="width: 70%;">
	        	<div  id="screenNotesDisplay"></div>
			    <div id="matrix" style="display: none;">
					<input type="radio" id="rowlabelPos" name="rowType" value="rowLabel" checked> Labels Row (blue)
					<input type="radio" id="collabelPos" name="rowType" value="colLabel"> Labels Column (blue)
			  		<input type="radio" id="rowCovPos" name="rowType" value="rowCov"> Row Covariates (yellow)
			  		<input type="radio" id="colCovPos" name="rowType" value="colCov"> Column Covariates (yellow)
			  		<input type="radio" id="dataStart" name="rowType" value="dataStart"> Data Start Location (green)
			        <br><br>
			        <div id="matrixDisplay" style="display: none;"></div>
			        <br>
			    </div>
			</div>
		</div>
		<div id="message" style="display: none; position: absolute; background-color: rgb(230, 240, 255);"></div>
	</body>
</html>