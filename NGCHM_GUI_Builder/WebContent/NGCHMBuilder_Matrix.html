<!DOCTYPE html>
<html lang="en">
    <head>
        <title>NG-CHM Builder</title>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	 	<script src="javascript/NGCHM_GUI_Util.js"></script>
	 	<script src="javascript/MatrixFile.js"></script>
	 	<script src="javascript/lib/handsontable.full.min.js"></script>
		<link rel="stylesheet" href="css/handsontable.full.css">
		<link rel="stylesheet" href="css/NGCHM_GUI.css">
		<script type="text/Javascript">
			var matrixFile = new NgChmGui.FILE.Matrix();
			NgChmGui.matrixFile = matrixFile.getMatrixFile();
			NgChmGui.UTIL.getHeatmapProperties(NgChmGui.FILE.loadData);
		 	window.onload = function() {
		 		var chmFileItem = document.getElementById('image-upload');
				chmFileItem.addEventListener('change', NgChmGui.matrixFile.sendMatrix, false);
		 	};	
	 	</script>
    </head>
    <body style="font-family: sans-serif; font-size: 100%;">
	   <div class="mdaServiceHeader" id="mdaServiceHeader">
	        <div id="mda_header" class="mdaServiceHeaderLogo">
	        	<a href="https://www.mdanderson.org/education-and-research/departments-programs-and-labs/departments-and-divisions/bioinformatics-and-computational-biology/index.html"  target="_blank">
	           		<img id="mdaLogo" src="images/mdabcblogo262x108.png" alt=""/>
	           </a>
	       	</div>
	 		<div id='map_info'>
		 		<div id='map_name' class="inputText">
	     			<div id="mapName"><b>Heat Map Name:</b>&nbsp;&nbsp;<input name="mapNameValue" id="mapNameValue" size="40"></input></div>
	  		    </div>
		 		<div id='map_desc' class="inputText">
	     			<div id="mapName"><b>Heat Map Desc:</b>&nbsp;&nbsp;&nbsp;<input name="mapDescValue" id="mapDescValue" size="100"></input></div>
	  		    </div>
	  		</div>
	    </div>   
	    <div id="container">   
	 		<div id="fileLookup">   
		        <form method="POST" enctype="multipart/form-data" id="matrix_frm" onsubmit="return false;">
		        	<div class="image-upload" id="image-upload">
					    <label for="file-input">
					        <img src="images/buttonMatrixOpen.png"/>
					    </label>
	    				<input id="file-input" type="file" name="matrix" id="matrix"/>
	    				<span id="fileNameText" style="font-weight: bold;padding-left: 10px;"></span>
					</div>
		        </form>
		    </div>
		    <div id="matrix" style="display: none;">
		 		<div id='matrix_name' class="inputText" style="display: none;">
	     			<div id="matrixName"><b>Matrix Name:</b>&nbsp;&nbsp;<input name="matrixNameValue" id="matrixNameValue" size="40" value="Data Layer 1"></input></div>
	  		    </div>
		        <br><b>Define the incoming data matrix: Select from the following controls and click on the grid to edit the location of labels, covariate bars, and the location at which the matrix data begins in the imported file.</b><br>
				<input type="radio" id="rowlabelPos" name="rowType" value="rowLabel" checked> Row Label Location (red)
				<input type="radio" id="collabelPos" name="rowType" value="colLabel"> Column Label Location (red)
		  		<input type="radio" id="rowCovPos" name="rowType" value="rowCov"> Row Covariate Location (yellow)
		  		<input type="radio" id="colCovPos" name="rowType" value="colCov"> Column Covariate Location (yellow)
		  		<input type="radio" id="dataStart" name="rowType" value="dataStart"> Edit Data Start Location (green)
		        <br><br>
		        <div id="matrixDisplay" style="display: none;"></div>
		        <br>
			    <img id='next1_btn' src='images/nextButton.png' alt='Go to next step' onclick='NgChmGui.matrixFile.processMatrix();' />
		    </div>
			<div id="msgBox" style="display: none; position: absolute; background-color: rgb(230, 240, 255);">
				<div class="msgBoxHdr" id="msgBoxHdr"></div>  
				<table>
					<tbody>
						<tr class="chmTblRow">
							<td>
								<div id="msgBoxTxt" style="display: inherit;font-size: 12px; background-color: rgb(230, 240, 255);"></div>
								<table>
									<tbody>
										<tr>
											<td align="left">
													<img id="msgBoxBtnImg_1" align="top" style="display: inherit;">
											</td>
											<td align="left">
													<img id="msgBoxBtnImg_2" align="top" style="display: inherit;">
											</td>
											<td align="right">
													<img id="msgBoxBtnImg_3" align="top" style="display: inherit;">
											</td>
											<td align="right">
													<img id="msgBoxBtnImg_4" align="top" style="display: inherit;">
											</td>
										</tr>
									</tbody>
								</table> 
							</td>
						</tr>
					</tbody>
				</table>
			</div>		
		</div>
	</body>
</html>